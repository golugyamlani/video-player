import{j as a,P}from"./player-Qcu1PBEA.js";import{a as S,r as i}from"./vendor-D88IX_79.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}})();var L,E=S;L=E.createRoot,E.hydrateRoot;function b(){const c=i.useRef(null),r=i.useRef(null),l=i.useRef(null),o=i.useRef(null),e=new URLSearchParams(window.location.search),t=e.get("video")||"https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4",n=e.get("adTag")||"",M={clickToPlay:!1,autoplay:!0,muted:!0,controls:["play-large","play","progress","current-time","duration","mute","volume","settings","fullscreen"],settings:["quality","speed"]},j={type:"video",sources:[{src:t,type:"video/mp4",size:576}]};return i.useEffect(()=>{if(!n)return;const u=()=>{var g,p,m,y;const s=new window.google.ima.AdDisplayContainer(l.current,(p=(g=c.current)==null?void 0:g.plyr)==null?void 0:p.media);s.initialize();const f=new window.google.ima.AdsLoader(s);f.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,x=>{var h,A,R,v;const w=new window.google.ima.AdsRenderingSettings;w.enablePreloading=!0,o.current=x.getAdsManager((A=(h=c.current)==null?void 0:h.plyr)==null?void 0:A.media,w);try{o.current.init(((R=r.current)==null?void 0:R.offsetWidth)||640,((v=r.current)==null?void 0:v.offsetHeight)||360,window.google.ima.ViewMode.NORMAL),o.current.start()}catch(O){console.error("AdsManager error:",O)}});const d=new window.google.ima.AdsRequest;d.adTagUrl=n,d.linearAdSlotWidth=((m=r.current)==null?void 0:m.offsetWidth)||640,d.linearAdSlotHeight=((y=r.current)==null?void 0:y.offsetHeight)||360,f.requestAds(d)};if(window.google&&window.google.ima)u();else{const s=document.createElement("script");s.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",s.onload=u,document.head.appendChild(s)}return()=>{o.current&&o.current.destroy()}},[n]),a.jsxs("div",{ref:r,className:"w-full h-full bg-black",children:[a.jsx("div",{ref:l,className:"absolute top-0 left-0 w-full h-full z-10"}),a.jsx(P,{ref:c,source:j,options:M})]})}L(document.getElementById("root")).render(a.jsx(i.StrictMode,{children:a.jsx(b,{})}));
