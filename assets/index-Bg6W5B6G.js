import{j as c,P as D}from"./player-Qcu1PBEA.js";import{a as b,r as i}from"./vendor-D88IX_79.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}})();var x,M=b;x=M.createRoot,M.hydrateRoot;function N(){const a=i.useRef(null),o=i.useRef(null),l=i.useRef(null),r=i.useRef(null),e=new URLSearchParams(window.location.search),t=e.get("video")||"https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4",n=e.get("adTag")||"",O={clickToPlay:!1,autoplay:!1,muted:!0,controls:["play-large","play","progress","current-time","duration","mute","volume","settings","fullscreen"],settings:["quality","speed"]},j={type:"video",sources:[{src:t,type:"video/mp4",size:576}]};return i.useEffect(()=>{if(!n)return;const u=()=>{var p,g,m,y;const s=new window.google.ima.AdDisplayContainer(l.current,(g=(p=a.current)==null?void 0:p.plyr)==null?void 0:g.media);s.initialize();const f=new window.google.ima.AdsLoader(s);f.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,P=>{var h,A,R,v,E,L;const w=new window.google.ima.AdsRenderingSettings;w.enablePreloading=!0,r.current=P.getAdsManager((A=(h=a.current)==null?void 0:h.plyr)==null?void 0:A.media,w),r.current.addEventListener(window.google.ima.AdEvent.Type.LOADED,()=>{r.current.start()});try{r.current.init(((R=o.current)==null?void 0:R.offsetWidth)||640,((v=o.current)==null?void 0:v.offsetHeight)||360,window.google.ima.ViewMode.NORMAL),r.current.start()}catch(S){console.error("AdsManager error:",S),(L=(E=a.current)==null?void 0:E.plyr)==null||L.play()}});const d=new window.google.ima.AdsRequest;d.adTagUrl=n,d.linearAdSlotWidth=((m=o.current)==null?void 0:m.offsetWidth)||640,d.linearAdSlotHeight=((y=o.current)==null?void 0:y.offsetHeight)||360,f.requestAds(d)};if(window.google&&window.google.ima)u();else{const s=document.createElement("script");s.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",s.onload=u,document.head.appendChild(s)}return()=>{r.current&&r.current.destroy()}},[n]),c.jsxs("div",{ref:o,className:"w-full h-full bg-black relative",children:[c.jsx("div",{ref:l,className:"absolute top-0 left-0 w-full h-[calc(100%-40px)] z-10"}),c.jsx(D,{ref:a,source:j,options:O})]})}x(document.getElementById("root")).render(c.jsx(i.StrictMode,{children:c.jsx(N,{})}));
